---
phase: 01-foundation-auth-dispatch
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - api/config.php
  - .htaccess
  - signatures/.htaccess
  - css/style.css
autonomous: true

must_haves:
  truths:
    - "api/config.php defines all credentials and constants — MICROPAY_TOKEN, ADMIN_PHONE, BASE_URL, ADMIN_USER, ADMIN_PASS"
    - "Root .htaccess forces HTTPS and disables directory listing"
    - "signatures/ directory exists with .htaccess that denies all direct access"
    - "css/style.css provides RTL Hebrew base styles for login and dispatch pages"
  artifacts:
    - path: "api/config.php"
      provides: "Centralized credentials and constants"
      contains: "MICROPAY_TOKEN"
    - path: ".htaccess"
      provides: "HTTPS redirect and directory listing prevention"
      contains: "RewriteEngine On"
    - path: "signatures/.htaccess"
      provides: "Direct access denial for signature PNGs"
      contains: "Require all denied"
    - path: "css/style.css"
      provides: "RTL Hebrew base styles"
      contains: "direction: rtl"
  key_links: []
---

<objective>
Create the project folder structure, centralized configuration file with all secrets, Apache .htaccess security rules, and shared CSS stylesheet.

Purpose: Establish the foundation that every subsequent plan depends on — config constants, HTTPS enforcement, directory protection, and RTL Hebrew styling. Without this, no PHP endpoint can find its credentials and no page has security headers.

Output: 4 files (api/config.php, .htaccess, signatures/.htaccess, css/style.css) forming the security and styling skeleton.
</objective>

<execution_context>
@C:/Users/Alias/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Alias/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-auth-dispatch/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create api/config.php and signatures directory with .htaccess protection</name>
  <files>api/config.php, signatures/.htaccess</files>
  <action>
Create the `api/` directory and `api/config.php` with these PHP constants:
- `MICROPAY_TOKEN` = `'16nI8fd3c366a8a010e76c7a03c7709178af'`
- `ADMIN_PHONE` = `'0526804680'`
- `BASE_URL` = `'https://ch-ah.info/FirstApp'`
- `ADMIN_USER` = `'Sharonb'`
- `ADMIN_PASS` = `'1532'`

Use `define()` for each constant. The file starts with `<?php` as the very first characters (no BOM, no blank line). Do NOT include a closing `?>` tag (prevents accidental trailing newline — see research Pitfall 2).

Add a comment block at the top explaining this file is included by other PHP files via `require_once __DIR__ . '/config.php'` and must never be served directly to browsers.

Create the `signatures/` directory with a `.htaccess` file inside it using the dual-syntax wrapper from research Pattern 7:
```apache
# Deny all direct access to signature files
<IfModule mod_authz_core.c>
    Require all denied
</IfModule>
<IfModule !mod_authz_core.c>
    Order deny,allow
    Deny from all
</IfModule>
```

This prevents anyone from browsing to `ch-ah.info/FirstApp/signatures/somefile.png` directly.
  </action>
  <verify>
Confirm files exist:
- `api/config.php` contains all 5 `define()` statements
- `signatures/.htaccess` contains `Require all denied`
- `api/config.php` starts with `<?php` as the very first characters (no BOM)
- `api/config.php` does NOT contain a closing `?>` tag
  </verify>
  <done>api/config.php defines MICROPAY_TOKEN, ADMIN_PHONE, BASE_URL, ADMIN_USER, ADMIN_PASS. signatures/.htaccess blocks direct access with dual Apache 2.2/2.4 syntax.</done>
</task>

<task type="auto">
  <name>Task 2: Create root .htaccess and RTL Hebrew CSS stylesheet</name>
  <files>.htaccess, css/style.css</files>
  <action>
Create the root `.htaccess` file with HTTPS redirect and directory listing disabled (research Pattern 6):
```apache
RewriteEngine On

# Force HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# Disable directory listing
Options -Indexes
```

Create `css/style.css` with RTL Hebrew base styles that will be shared by all HTML pages (index.html, dashboard.html, sign.html):
- `direction: rtl` and `text-align: right` on body
- Hebrew-friendly font stack: `'Segoe UI', Tahoma, Arial, sans-serif`
- `lang="he"` assumed on HTML element
- Box-sizing border-box reset
- Clean centered layout: max-width container (400px), centered with margin auto, padding
- Form styling: full-width inputs, readable font size (16px minimum to prevent iOS zoom), padding, border-radius
- Button styling: primary action button with background color (#2196F3 or similar), white text, full width, padding, cursor pointer, hover state
- Error message styling: red text, hidden by default (`display: none`), shown when `.visible` class added or `style.display = 'block'`
- Success message styling: green text, same show/hide pattern
- Mobile-responsive: body padding for small screens
- RTL-aware form labels (right-aligned, block display)

Keep it simple and functional — this is a learning project, not a design showcase. Approximately 80-120 lines of CSS.
  </action>
  <verify>
Confirm files exist:
- `.htaccess` contains `RewriteEngine On` and `HTTPS` redirect rule and `Options -Indexes`
- `css/style.css` contains `direction: rtl` and font-family declaration and form/button/error styles
  </verify>
  <done>Root .htaccess enforces HTTPS and blocks directory listing. css/style.css provides RTL Hebrew base styles with form, button, error, and success message styling.</done>
</task>

</tasks>

<verification>
After both tasks:
1. The folder structure matches the research architecture pattern:
   ```
   FirstApp/
   ├── api/
   │   └── config.php
   ├── css/
   │   └── style.css
   ├── signatures/
   │   └── .htaccess
   └── .htaccess
   ```
2. `api/config.php` can be parsed by PHP without errors (no syntax issues)
3. All 5 constants are defined in config.php
4. No secrets appear outside of `api/config.php`
</verification>

<success_criteria>
- 4 files created matching the folder structure above
- config.php defines all 5 constants needed by subsequent plans
- .htaccess files provide HTTPS redirect + directory protection
- CSS provides RTL Hebrew styling ready for login and dispatch pages
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-auth-dispatch/01-01-SUMMARY.md`
</output>
